<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Document Storage</title>
</head>

<body>
    <table>
        <tbody>
        <tr><td><span><span th:text="|${entityType}s|">Entities</span> in storage:</span></td></tr>
        <tr th:if="${inStorage.empty}">
        <td colspan="2">No <span th:text="|${entityType}s|">Entities</span> Available</td>
        </tr>
        </tbody>
    </table>
    <table>
        <tbody>
        <tr th:if="${entityType.name()} == 'DOCUMENT'" th:each="entry : ${inStorage}">
            <td><span th:utext="|Id: ${entry.id} |">Document id</span></td>
            <td><span th:utext="|, Path: ${entry.path} |">Document Path</span></td>
            <td><a href="content" th:href="@{~/DocumentStorageWithSearchCapability/rest/docs/{docid}/content(docid=${entry.id})}">Get Content</a></td>
            <td><a href="download" th:href="@{~/DocumentStorageWithSearchCapability/rest/docs/{docid}(docid=${entry.id})}">Download</a></td>
            <td><span th:utext="|, Groups: |">Groups</span></td>
            <td><th:block th:each="docPermissions : ${entry.documentsPermissions}"><span th:utext="|[Id: ${docPermissions.group.id}, ${docPermissions.permissions}]  |">Permissions</span></th:block></td>
        </tr>
        <tr th:if="${entityType.name()} == 'USER'" th:each="entry : ${inStorage}">
            <td><span th:utext="|Id: ${entry.id} |">User name</span></td>
            <td><span th:utext="|, Name: ${entry.name} |">User id</span></td>
            <td><span th:utext="|, Groups: |">Groups</span></td>
            <td><th:block th:each="group : ${entry.groups}"><span th:utext="|${group.name}   |">Group name</span></th:block></td>
<!--            <th:block th:each="group : ${entry.groups}"><td><span th:utext="|Group: ${group.name}; |">User's Groups</span></td></th:block>-->
        </tr>
        <tr th:if="${entityType.name()} == 'GROUP'" th:each="entry : ${inStorage}">
            <td><span th:utext="|${entry.name} |">Group name</span></td>
            <td><span th:utext="|, Id: ${entry.id} |">Group id</span></td>
            <!--<td><span th:utext="|, Docs: |">Docs</span></td>
            <td><th:block th:each="docPermissions : ${entry.documentsPermissions}"><span th:utext="|[Id: ${docPermissions.document.id}, ${docPermissions.permissions}]  |">Permissions</span></th:block></td>-->
            <td><span th:utext="|, Users: |">Group's users</span></td>
            <td><th:block th:each="user : ${entry.users}"><span th:utext="|${user.name} |">Group's users</span></th:block></td>
            <!--<th:block th:each="user : ${entry.users}">
                <td><span th:utext="|${user.name} |">Group's users</span></td>-->
<!--                <th:block th:each="group : ${user.groups}"><td><span th:text="|${group.name} |">Group Name</span></td></th:block>-->
            <!--</th:block>-->
        </tr>
        <tr th:if="${entityType.name()} == 'DOC_GROUP_PERMISSIONS'" th:each="entry : ${inStorage}">
            <td><span th:utext="|${entry.id} , Permissions: ${entry.permissions}|">Permissions</span></td>
            <!--<td><span th:utext="|Doc id: ${entry.document.id}, Group id: ${entry.group.id}, Permissions: ${entry.permissions}|">Permissions</span></td>-->
        </tr>
        <tr th:if="${entityType.name()} == 'FOLDER_GROUP_PERMISSIONS'" th:each="entry : ${inStorage}">
            <td><span th:utext="|${entry.id} , Permissions: ${entry.permissions}|">Permissions</span></td>
        </tr>
        </tbody>
    </table>
</body>
</html>
<!--<body>-->
<!--<section th:fragment="fragment1">-->
<!--    <div th:text="${message}" />-->
<!--</section>-->
<!--<p th:utext="${inStorageContentBuilder}"> Document Title </p>-->
<!--<section th:fragment="fragment2">-->
<!--    <div th:text="${message}" />-->
<!--</section>-->
<!--</body>-->